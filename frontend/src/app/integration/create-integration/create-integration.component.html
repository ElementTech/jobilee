<div>
  <p-fieldset legend="Create Integration" [toggleable]="false">
    <form (ngSubmit)="onSubmit()">
      <div class="grid">
        <div class="col-6">
          <h5>Name</h5>
          <input pInputText class="min-w-full" type="text" id="name" required [(ngModel)]="integration.name" name="name" placeholder="myapi">
        </div>
    
        <div class="col-6">
          <h5>URL</h5>
          
          <!-- <p-table [value]="optionsURL" styleClass="p-datatable-sm">
            <ng-template pTemplate="header">
                <tr>
                    <th>Name</th>
                    <th>Description</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-option>
                <tr>
                    <td>{{option.name}}</td>
                    <td>{{option.description}}</td>
                </tr>
            </ng-template>
        </p-table> -->
          <input pInputText  class="min-w-full"  type="text" id="url" required [(ngModel)]="integration.url" name="url" placeholder="https://user:pass@api.com">
        </div>
        </div>
        <hr>
        <p-fieldset legend="Construct API" [toggleable]="false">
   
                <ng-template pTemplate="header">
                  <div class="mt-3">
                    <p-selectButton [(ngModel)]="integration.type" name="type" (onChange)="setTable($event)"
                    [options]="[{label: 'GET', value: 'get'},{label: 'POST', value: 'post'}]"></p-selectButton>
                  </div>
            
                </ng-template>
           
          
        
              <p-table [value]="options" styleClass="p-datatable-sm" [tableStyle]="{'min-width': '50rem'}">
                <ng-template pTemplate="caption">
                  <div class="table-header">
                    Use the following variables to construct a generic API query in order to trigger jobs with the API endpoint
         
                  </div>
              </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-option>
                    <tr>
                        <td>{{option.name}}</td>
                        <td>{{option.description}}</td>
                    </tr>
                </ng-template>
            </p-table>
              <div class="p-inputgroup pt-3">
                  <span class="p-inputgroup-addon">{{integration.url}}</span>
                  <input type="text" [(ngModel)]="integration.definition" name="definition"  class="min-w-max" pInputText placeholder="/job/{job}/buildWithParameters">      
              </div>
              <div *ngIf="integration.type == 'post'" class="pt-3 grid">
                <p-panel header="Payload"  class="col" >
                  <json-editor [options]="makeOptions()"  [(ngModel)]="integration.payload" [ngModelOptions]=" 
                  {standalone: true}"></json-editor>
                </p-panel>
                <p-panel header="{parameter}"  class="col" >
                  <json-editor [options]="makeOptions()"  [(ngModel)]="integration.parameter" [ngModelOptions]=" 
                  {standalone: true}"></json-editor>
                </p-panel>
              </div>
        </p-fieldset>
      <p-button type="submit" label="Submit" icon="pi pi-check" class="fixed" styleClass="p-button-lg" style="bottom:2rem;right:2rem;"></p-button>
    </form>
  </p-fieldset>
</div>
